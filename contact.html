<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- META -->
    <title>Contact us | Masjid Al-Aqsa</title>
    <meta name="description"
        content="Contact us for inquiries or collaborations. Learn rich history and religious significance of Masjid al-Aqsa and understand Palestine's occupation through facts.">
    <meta name="keywords"
        content="contact, masjid al aqsa, masjid al aqsa palestine, Jerusalem, qibli masjid, dome of the rock, palestine">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-T7VKFG4ME4"></script>
    <script>
        var hostname = window.location.hostname;
        if (hostname === 'masjidalaqsa.com' || hostname === 'www.masjidalaqsa.com') {
            window.dataLayer = window.dataLayer || [];
            function gtag() { dataLayer.push(arguments); }
            gtag('js', new Date());
            gtag('config', 'G-T7VKFG4ME4');
            gtag('config', 'AW-11456462952');
        }
    </script>
    <!-- Open Graph Tags -->
    <meta property="og:title" content="Contact us | Masjid Al Aqsa" />
    <meta property="og:description"
        content="Contact Us - MasjidAlAqsa.com - Learn the magnificient history and religious significance of Masjid al-Aqsa" />
    <meta property="og:url" content="https://masjidalaqsa.com/contact" />
    <meta property="og:type" content="website" />
    <meta property="og:image"
        content="https://masjidalaqsa.com/assets/images/social-banners/masjid-al-aqsa-banner.webp" />

    <!-- Twitter Card Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Contact us | Masjid Al Aqsa">
    <meta name="twitter:description"
        content="Contact Us - MasjidAlAqsa.com - Learn the magnificient history and religious significance of Masjid al-Aqsa">
    <meta name="twitter:image"
        content="https://masjidalaqsa.com/assets/images/social-banners/masjid-al-aqsa-banner.webp">


    <!-- General -->
    <meta itemprop="name" content="Contact us | Masjid Al Aqsa" />
    <meta itemprop="url" content="https://masjidalaqsa.com/contact" />
    <meta itemprop="thumbnailUrl"
        content="https://masjidalaqsa.com/assets/images/social-banners/masjid-al-aqsa-banner.webp" />
    <meta itemprop="image" content="https://masjidalaqsa.com/assets/images/social-banners/masjid-al-aqsa-banner.webp" />

    <!-- Favicon -->
    <link rel="shortcut icon" type="image/png" href="https://masjidalaqsa.b-cdn.net/assets/images/favicon.png" />
    <link rel="apple-touch-icon" href="https://masjidalaqsa.b-cdn.net/assets/images/favicon.png" />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
    <link rel="stylesheet" href="https://masjidalaqsa.b-cdn.net/assets/css/common.css">
    <link rel="stylesheet" href="https://masjidalaqsa.b-cdn.net/assets/css/contact.css">
</head>

<body>

    <!-- Navbar markup - added via JS -->
    <header id="navbar" class="header-section position-absolute top-0 start-0 w-100 z-3"></header>

    <!-- hero section start -->
    <section class="hero-section hero_section_sm">
        <div class="container position-relative">
            <div class="row">
                <div class="col-12 text-center">
                    <h1 class="fs-37 text-white">Contact</h1>
                    <h6 class="mt-2 text-white fw-medium">Reach out to us for any kind of query</h6>
                </div>
            </div>
        </div>
    </section>

    <div class="container maxw-990 py-80 mb-5">
        <div class="row px-3">

            <div class="col-12 col-md-8 mx-auto">
                <div class="py-3 text-success" id="successResponse">
                    <p class="text-center ">Submitted Successfully</p>
                </div>

                <!-- Contact Form Section -->
                <form id="contactForm" method="post">
                    <!-- Name Input -->
                    <div class="form-group mb-4">
                        <input type="text" name="client-name" class="form-control" id="client-name"
                            placeholder="Your name" required>
                        <p class="text-danger error-message"></p>
                    </div>

                    <!-- Email Input -->
                    <div class="form-group mb-4">
                        <input type="email" class="form-control" name="client-email" id="client-email"
                            placeholder="Your email" required>
                        <p class="text-danger error-message"></p>
                    </div>

                    <!-- Message Input -->
                    <div class="form-group mb-4">
                        <textarea name="message" class="form-control" id="message" rows="10" placeholder="Your message"
                            required></textarea>
                        <p class="text-danger error-message"></p>
                    </div>

                    <!-- Attachment Input -->
                    <div class="form-group mb-4">
                        <label for="attachments" class="text-secondary mb-1">Attachment (optional):</label>
                        <input type="file" class="form-control" id="attachments" name="attachments[]" multiple>
                        <p class="text-danger error-message"></p>
                    </div>

                    <!-- Google reCAPTCHA -->
                    <div class="g-recaptcha" data-sitekey="6LdOIRApAAAAADB8TtJPoQT20FkPjNlDwDvWF6B8"></div>
                    <p class="text-danger error-message" id="captcha-error"></p>

                    <!-- Submit Button -->
                    <button type="button" id="submitBtn" class="btn btn-lg btn-primary mt-4">
                        <span class="btn-text">Send</span>
                        <div class="btn-loader">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </button>

                    <!-- Submission Error/Success Message -->
                    <p class="text-danger error-message mt-3 py-3" id="errorResponse"></p>
                </form>

            </div>

            <div class="col-12 col-md-4 my-5 my-md-0">
                <div>
                    <h6 class="text-dark-brown">Emails:</h6>
                    <a target="_blank" class="text-yellow mt-3 d-block"
                        href="mailto:info@masjidalaqsa.com">info@masjidalaqsa.com</a>
                    <a target="_blank" class="text-yellow mt-3 d-block"
                        href="mailto:copyright@masjidalaqsa.com">copyright@masjidalaqsa.com</a>
                </div>
                <div class="mt-5">
                    <h6 class="text-dark-brown">Social:</h6>
                    <div class="social-links mt-4">
                        <a href="https://twitter.com/TheMasjidAlAqsa" target="_blank" class="p-2">
                            <i class="fa-brands fa-x-twitter"></i>
                        </a>
                    </div>
                </div>
            </div>


        </div>
    </div>

    <!-- Footer markup - added via JS -->
    <footer id="footer" class="footer-section position-relative z-0 bg-dark"></footer>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.2.1/axios.min.js"></script>
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <script src="https://masjidalaqsa.b-cdn.net/assets/js/main.js"></script>

    <script>

        $(document).ready(function () {

            // On input remove error border and message
            $("#contactForm .form-control").on('input', function () {
                $(this).removeClass('border-red');
                $(this).next('.error-message').text('');
            });

            // Form submit
            $("#submitBtn").click(function (event) {

                event.preventDefault();
                const emailRegex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+\.[a-zA-Z]{2,}$/;
                const formData = new FormData($('#contactForm')[0]);
                $("#contactForm .form-control[required]").removeClass('border-red');
                let isValid = true;
                let firstErrorElement = null;

                // Clear previous errors and messages
                $(".error-message").text('');
                $("#errorResponse").text('').hide();
                $("#successResponse").text('').hide();

                // Validate required inputs
                $("#contactForm .form-control[required]").each(function () {
                    const input = $(this);
                    const value = input.val().trim();
                    const type = input.attr('type');
                    const errorElement = input.next('.error-message');

                    if (value === '') {

                        errorElement.text("Required*");
                        input.addClass('border-red');
                        if (!firstErrorElement) firstErrorElement = input;
                        isValid = false;

                    } else if (type === 'email' && !emailRegex.test(value)) {

                        errorElement.text("Enter valid email");
                        input.addClass('border-red');
                        if (!firstErrorElement) firstErrorElement = input;
                        isValid = false;
                    }
                });

                // Validate file attachments (if any)
                const files = $('#attachments')[0].files;
                if (files.length > 0) {
                    const allowedFileTypes = ['application/vnd.openxmlformats-officedocument.wordprocessingml.document', 'application/pdf', 'image/png', 'image/jpeg', 'image/jpg', 'video/mp4', 'video/quicktime'];
                    $.each(files, function (index, file) {

                        if (!allowedFileTypes.includes(file.type) || file.size > 10 * 1024 * 1024) {
                            $("#attachments").next('.error-message').text("Invalid file type or size exceeds 10MB");
                            if (!firstErrorElement) firstErrorElement = $("#attachments");
                            isValid = false;
                        } else {
                            formData.append('attachments[]', file);
                        }
                    });
                }

                // Validate Captcha
                if (!grecaptcha.getResponse()) {
                    $("#captcha-error").text("Captcha verification required");
                    if (!firstErrorElement) firstErrorElement = $('.g-recaptcha');
                    isValid = false;
                }

                // Scroll to the first error element, if exists
                if (firstErrorElement) {
                    const elementTop = firstErrorElement.offset().top;
                    const elementBottom = elementTop + firstErrorElement.outerHeight();
                    const viewportTop = $(window).scrollTop();
                    const viewportBottom = viewportTop + $(window).height();

                    if (elementTop < viewportTop || elementBottom > viewportBottom) {

                        // Element is out of view, scroll to it
                        $('html, body').animate({
                            scrollTop: firstErrorElement.offset().top - 50
                        }, 200);
                    }
                }


                // If all inputs are valid, proceed to send email
                if (isValid) {
                    $(".btn-text").hide();
                    $(".btn-loader").show();

                    $.ajax({
                        url: 'submit_form.php',
                        type: 'POST',
                        data: formData,
                        contentType: false,
                        processData: false,
                        success: function (response) {
                            var responseJson = $.parseJSON(response);
                            if (responseJson.success) {
                                $("#contactForm")[0].reset();
                                $("#contactForm").hide();
                                $("#successResponse").text("Your message has been sent").show();
                            } else {
                                $("#errorResponse").text("An error occurred. Try again.").show();
                            }
                        },
                        error: function () {
                            $("#errorResponse").text("An error occurred. Try again.").show();
                        },
                        complete: function () {
                            $(".btn-text").show();
                            $(".btn-loader").hide();
                            grecaptcha.reset(); // Reset reCAPTCHA
                        }
                    });
                }
            });
        });
    </script>



</body>

</html>